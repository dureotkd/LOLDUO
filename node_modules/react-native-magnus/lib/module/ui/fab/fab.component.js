var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.Fab=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var React=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _color=_interopRequireDefault(require("color"));var _theme=require("../../theme/theme.service");var _fab=require("./fab.style");var _theme2=require("../../theme");var _button=require("../button/button.component");var _icon=require("../icon/icon.component");var _withDefaultProps=require("../../utilities/withDefaultProps");var _jsxFileName="D:\\code\\react-native-magnus\\src\\ui\\fab\\fab.component.tsx";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}var FabBase=function(_React$Component){(0,_inherits2.default)(FabBase,_React$Component);var _super=_createSuper(FabBase);function FabBase(props){var _props$bottom,_props$h,_props$bottom2;var _this;(0,_classCallCheck2.default)(this,FabBase);_this=_super.call(this,props);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"animation",void 0);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"fadeAnimation",void 0);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"visibleAnimation",void 0);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"actionsAnimation",void 0);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"mainBottomAnimation",void 0);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"actionsBottomAnimation",void 0);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"getIcon",function(){var active=_this.state.active;var _this$props=_this.props,icon=_this$props.icon,colorProp=_this$props.color,fontSize=_this$props.fontSize,activeIcon=_this$props.activeIcon;if(active===false){if(typeof icon==='string'){return React.createElement(_icon.Icon,{name:icon,fontSize:fontSize,color:colorProp,__source:{fileName:_jsxFileName,lineNumber:65,columnNumber:16}});}if(React.isValidElement(icon)){return icon;}}else{if(typeof activeIcon==='string'){return React.createElement(_icon.Icon,{name:activeIcon,fontSize:fontSize,color:colorProp,__source:{fileName:_jsxFileName,lineNumber:73,columnNumber:16}});}if(React.isValidElement(activeIcon)){return activeIcon;}}return false;});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"reset",function(){var _this$props2=_this.props,animated=_this$props2.animated,onClose=_this$props2.onClose,h=_this$props2.h,bottom=_this$props2.bottom,_this$props2$useNativ=_this$props2.useNativeDriver,useNativeDriver=_this$props2$useNativ===void 0?false:_this$props2$useNativ;if(animated){_reactNative.Animated.spring(_this.animation,{toValue:0,useNativeDriver:useNativeDriver}).start();_reactNative.Animated.spring(_this.actionsAnimation,{toValue:0,useNativeDriver:useNativeDriver}).start();_reactNative.Animated.spring(_this.actionsBottomAnimation,{toValue:(h!==null&&h!==void 0?h:40)+(bottom!==null&&bottom!==void 0?bottom:40),useNativeDriver:useNativeDriver}).start();}_this.updateState({active:false},function(){if(onClose){onClose();}});});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"animateButton",function(){var _this$props3=_this.props,animated=_this$props3.animated,onOpen=_this$props3.onOpen,h=_this$props3.h,bottom=_this$props3.bottom,_this$props3$useNativ=_this$props3.useNativeDriver,useNativeDriver=_this$props3$useNativ===void 0?false:_this$props3$useNativ;var active=_this.state.active;if(!active){if(animated){_reactNative.Animated.spring(_this.animation,{toValue:1,useNativeDriver:useNativeDriver}).start();}if(animated){_reactNative.Animated.spring(_this.actionsAnimation,{toValue:1,useNativeDriver:useNativeDriver}).start();_reactNative.Animated.spring(_this.actionsBottomAnimation,{toValue:(h!==null&&h!==void 0?h:40)+(bottom!==null&&bottom!==void 0?bottom:40)+20,useNativeDriver:useNativeDriver}).start();_reactNative.LayoutAnimation.configureNext({duration:180,create:{type:_reactNative.LayoutAnimation.Types.easeInEaseOut,property:_reactNative.LayoutAnimation.Properties.opacity}});}_this.updateState({active:true},function(){if(onOpen){onOpen();}});}else{_this.reset();}});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"updateState",function(nextState,callback){_this.setState(nextState,function(){if(callback){callback();}});});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"handlePressBackdrop",function(){var onPressBackdrop=_this.props.onPressBackdrop;if(onPressBackdrop){onPressBackdrop();}_this.reset();});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"handlePressItem",function(){_this.reset();});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"renderMainButton",function(computedStyles){var _this$props4=_this.props,animated=_this$props4.animated,position=_this$props4.position,right=_this$props4.right,bottom=_this$props4.bottom,rest=(0,_objectWithoutProperties2.default)(_this$props4,["animated","position","right","bottom"]);var active=_this.state.active;var animatedViewStyle;var animatedVisibleView;if(animated){animatedVisibleView={opacity:_this.fadeAnimation};animatedViewStyle={opacity:_this.fadeAnimation,transform:[{rotate:_this.animation.interpolate({inputRange:[0,1],outputRange:['0deg','180deg']})}]};}else if(active){animatedVisibleView={};animatedViewStyle={opacity:_this.fadeAnimation,transform:[{rotate:'45deg'}]};}else{animatedVisibleView={};animatedViewStyle={transform:[{rotate:'0deg'}]};}return React.createElement(_reactNative.Animated.View,{style:[computedStyles.button,animatedVisibleView],accessible:true,accessibilityLabel:"Floating Action Button",__source:{fileName:_jsxFileName,lineNumber:242,columnNumber:7}},React.createElement(_button.Button,(0,_extends2.default)({mb:bottom,mr:right,onPress:_this.animateButton},rest,{__source:{fileName:_jsxFileName,lineNumber:247,columnNumber:9}}),React.createElement(_reactNative.Animated.View,{style:[animatedViewStyle],__source:{fileName:_jsxFileName,lineNumber:248,columnNumber:11}},_this.getIcon())));});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"renderActions",function(computedStyle){var _this$props5=_this.props,animated=_this$props5.animated,right=_this$props5.right,children=_this$props5.children;var active=_this.state.active;var animatedActionsStyle;if(animated){animatedActionsStyle={opacity:_this.actionsAnimation.interpolate({inputRange:[0,1],outputRange:[0,1]})};}else{animatedActionsStyle={opacity:active?1:0};}var actionsStyles=[computedStyle.actions,animatedActionsStyle,{right:right,bottom:_this.actionsBottomAnimation}];return React.createElement(_reactNative.Animated.View,{style:actionsStyles,pointerEvents:"box-none",__source:{fileName:_jsxFileName,lineNumber:280,columnNumber:7}},React.Children.map(children,function(child){return React.cloneElement(child,{mb:child.props.mb?child.props.mb:'lg',onPress:function onPress(e){if(!active)return;if(child.props.onPress){child.props.onPress(e);}_this.reset();}});}));});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"renderTappableBackground",function(theme,computedStyle){var _this$props6=_this.props,overlayColor=_this$props6.overlayColor,overlayOpacity=_this$props6.overlayOpacity;var calculatedOverlayColor=(0,_color.default)((0,_theme.getThemeColor)(theme.colors,overlayColor)).alpha(overlayOpacity!==null&&overlayOpacity!==void 0?overlayOpacity:1).rgb().string();return React.createElement(_reactNative.TouchableOpacity,{activeOpacity:1,style:[computedStyle.overlay,{backgroundColor:calculatedOverlayColor}],onPress:_this.handlePressBackdrop,__source:{fileName:_jsxFileName,lineNumber:312,columnNumber:7}});});_this.state={active:false};_this.mainBottomAnimation=new _reactNative.Animated.Value((_props$bottom=props.bottom)!==null&&_props$bottom!==void 0?_props$bottom:0);_this.actionsBottomAnimation=new _reactNative.Animated.Value(((_props$h=props.h)!==null&&_props$h!==void 0?_props$h:40)+((_props$bottom2=props.bottom)!==null&&_props$bottom2!==void 0?_props$bottom2:40)+30);_this.animation=new _reactNative.Animated.Value(0);_this.actionsAnimation=new _reactNative.Animated.Value(0);_this.visibleAnimation=new _reactNative.Animated.Value(0);_this.fadeAnimation=new _reactNative.Animated.Value(1);return _this;}(0,_createClass2.default)(FabBase,[{key:"componentDidMount",value:function componentDidMount(){var openOnMount=this.props.openOnMount;if(openOnMount){this.animateButton();}}},{key:"render",value:function render(){var _this2=this;var active=this.state.active;var showBackground=this.props.showBackground;return React.createElement(_theme2.ThemeContext.Consumer,{__source:{fileName:_jsxFileName,lineNumber:328,columnNumber:7}},function(_ref){var theme=_ref.theme;var computedStyle=(0,_fab.getStyle)(theme,_this2.props);return React.createElement(_reactNative.Animated.View,{pointerEvents:'box-none',style:computedStyle.overlay,__source:{fileName:_jsxFileName,lineNumber:333,columnNumber:13}},active&&showBackground&&_this2.renderTappableBackground(theme,computedStyle),_this2.renderActions(computedStyle),_this2.renderMainButton(computedStyle));});}}]);return FabBase;}(React.Component);var Fab=(0,_withDefaultProps.withDefaultProps)(FabBase,'Fab',{color:'white',fontSize:'4xl',p:18,overlayColor:'gray900',overlayOpacity:0.5,position:'absolute',openOnMount:false,showBackground:true,animated:true,bottom:30,right:30,icon:'plus',activeIcon:'close',rounded:'circle',bg:'blue500',useNativeDriver:false,shadow:'lg',shadowColor:'gray900'});exports.Fab=Fab;
//# sourceMappingURL=fab.component.js.map