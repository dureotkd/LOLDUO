{"version":3,"sources":["carousel.component.tsx"],"names":["Carousel","incomingProps","props","showIndicators","children","renderIndicators","React","useState","selectedPage","setSelectedPage","totalPages","setTotalPages","totalContentWidth","setTotalContentWidth","items","useMemo","Children","map","child","isValidElement","type","CarouselItem","console","warn","init","width","totalItems","length","getPage","event","widthOffset","nativeEvent","contentOffset","x","widthOfEachItem","page","internal_renderIndicators","Array","fill","_","index","flex","w","_h","data","contentSize","Item"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { NativeScrollEvent, NativeSyntheticEvent } from 'react-native';\r\nimport { useDefaultProps } from '../../utilities/useDefaultProps';\r\nimport { Div } from '../div/div.component';\r\nimport { ScrollDiv } from '../scrolldiv/scrolldiv.component';\r\n\r\nimport { CarouselProps, CompoundedCarousel } from './carousel.type';\r\nimport CarouselItem from './item.carousel';\r\n\r\nconst Carousel: CompoundedCarousel<CarouselProps> = (incomingProps) => {\r\n  const props = useDefaultProps('Carousel', incomingProps, {\r\n    showIndicators: true,\r\n  });\r\n\r\n  const { children, renderIndicators, showIndicators } = props;\r\n  const [selectedPage, setSelectedPage] = React.useState(1);\r\n  const [totalPages, setTotalPages] = React.useState(1);\r\n  const [totalContentWidth, setTotalContentWidth] = React.useState(0);\r\n\r\n  const items: JSX.Element[] = React.useMemo(() => {\r\n    return (\r\n      React.Children.map(children, (child) => {\r\n        if (!React.isValidElement(child)) {\r\n          return;\r\n        }\r\n\r\n        if (child.type === CarouselItem) {\r\n          return child;\r\n        }\r\n\r\n        console.warn(\r\n          'Only children of type Carousel.Item are allowed here. Any other child components will be ignored.'\r\n        );\r\n        return null;\r\n      }) ?? []\r\n    );\r\n  }, [children]);\r\n\r\n  const init = (width: number) => {\r\n    // initialize width\r\n    setTotalContentWidth(width);\r\n    // initialize total pages\r\n    const totalItems = items.length;\r\n    setTotalPages(totalItems);\r\n  };\r\n\r\n  const getPage = (event: NativeSyntheticEvent<NativeScrollEvent>) => {\r\n    const widthOffset = event.nativeEvent.contentOffset.x;\r\n\r\n    const widthOfEachItem = totalContentWidth / totalPages;\r\n    // const pageWidth = widthOfEachItem * itemsPerPage;\r\n\r\n    for (let page = 1; page <= totalPages; page++) {\r\n      if (widthOffset + 1 < widthOfEachItem * page) {\r\n        return page;\r\n      }\r\n\r\n      if (page === totalPages) {\r\n        return page;\r\n      }\r\n    }\r\n\r\n    return 0;\r\n  };\r\n\r\n  const internal_renderIndicators = () => {\r\n    if (renderIndicators) {\r\n      return renderIndicators({ selectedPage, totalPages });\r\n    }\r\n\r\n    return (\r\n      <Div flexDir=\"row\" justifyContent=\"center\" my=\"lg\">\r\n        {Array(totalPages)\r\n          .fill(0)\r\n          .map((_, index) => {\r\n            return (\r\n              <Div\r\n                w={10}\r\n                h={10}\r\n                rounded=\"circle\"\r\n                bg={selectedPage === index + 1 ? 'blue600' : 'gray400'}\r\n                mx=\"xs\"\r\n                key={index}\r\n              />\r\n            );\r\n          })}\r\n      </Div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ScrollDiv\r\n        {...props}\r\n        horizontal={true}\r\n        contentContainerStyle={{\r\n          width: `${100 * totalPages}%`,\r\n          flex: 1,\r\n        }}\r\n        showsHorizontalScrollIndicator={false}\r\n        onContentSizeChange={(w, _h) => init(w)}\r\n        onScroll={(data) => {\r\n          setTotalContentWidth(data.nativeEvent.contentSize.width);\r\n          setSelectedPage(getPage(data));\r\n        }}\r\n        scrollEventThrottle={200}\r\n        pagingEnabled\r\n        decelerationRate=\"fast\"\r\n      >\r\n        {items?.map((child, index) => (\r\n          <Div flex={1} key={index}>\r\n            {child}\r\n          </Div>\r\n        ))}\r\n      </ScrollDiv>\r\n\r\n      {showIndicators && internal_renderIndicators()}\r\n    </>\r\n  );\r\n};\r\n\r\nCarousel.Item = CarouselItem;\r\n\r\nexport { Carousel };\r\n"]}