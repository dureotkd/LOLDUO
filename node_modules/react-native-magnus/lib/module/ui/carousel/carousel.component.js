var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.Carousel=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireDefault(require("react"));var _useDefaultProps=require("../../utilities/useDefaultProps");var _div=require("../div/div.component");var _scrolldiv=require("../scrolldiv/scrolldiv.component");var _item=_interopRequireDefault(require("./item.carousel"));var _jsxFileName="D:\\code\\react-native-magnus\\src\\ui\\carousel\\carousel.component.tsx";var Carousel=function Carousel(incomingProps){var props=(0,_useDefaultProps.useDefaultProps)('Carousel',incomingProps,{showIndicators:true});var children=props.children,renderIndicators=props.renderIndicators,showIndicators=props.showIndicators;var _React$useState=_react.default.useState(1),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),selectedPage=_React$useState2[0],setSelectedPage=_React$useState2[1];var _React$useState3=_react.default.useState(1),_React$useState4=(0,_slicedToArray2.default)(_React$useState3,2),totalPages=_React$useState4[0],setTotalPages=_React$useState4[1];var _React$useState5=_react.default.useState(0),_React$useState6=(0,_slicedToArray2.default)(_React$useState5,2),totalContentWidth=_React$useState6[0],setTotalContentWidth=_React$useState6[1];var items=_react.default.useMemo(function(){var _React$Children$map;return(_React$Children$map=_react.default.Children.map(children,function(child){if(!_react.default.isValidElement(child)){return;}if(child.type===_item.default){return child;}console.warn('Only children of type Carousel.Item are allowed here. Any other child components will be ignored.');return null;}))!==null&&_React$Children$map!==void 0?_React$Children$map:[];},[children]);var init=function init(width){setTotalContentWidth(width);var totalItems=items.length;setTotalPages(totalItems);};var getPage=function getPage(event){var widthOffset=event.nativeEvent.contentOffset.x;var widthOfEachItem=totalContentWidth/totalPages;for(var page=1;page<=totalPages;page++){if(widthOffset+1<widthOfEachItem*page){return page;}if(page===totalPages){return page;}}return 0;};var internal_renderIndicators=function internal_renderIndicators(){if(renderIndicators){return renderIndicators({selectedPage:selectedPage,totalPages:totalPages});}return _react.default.createElement(_div.Div,{flexDir:"row",justifyContent:"center",my:"lg",__source:{fileName:_jsxFileName,lineNumber:72,columnNumber:7}},Array(totalPages).fill(0).map(function(_,index){return _react.default.createElement(_div.Div,{w:10,h:10,rounded:"circle",bg:selectedPage===index+1?'blue600':'gray400',mx:"xs",key:index,__source:{fileName:_jsxFileName,lineNumber:77,columnNumber:15}});}));};return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_scrolldiv.ScrollDiv,(0,_extends2.default)({},props,{horizontal:true,contentContainerStyle:{width:"".concat(100*totalPages,"%"),flex:1},showsHorizontalScrollIndicator:false,onContentSizeChange:function onContentSizeChange(w,_h){return init(w);},onScroll:function onScroll(data){setTotalContentWidth(data.nativeEvent.contentSize.width);setSelectedPage(getPage(data));},scrollEventThrottle:200,pagingEnabled:true,decelerationRate:"fast",__source:{fileName:_jsxFileName,lineNumber:93,columnNumber:7}}),items===null||items===void 0?void 0:items.map(function(child,index){return _react.default.createElement(_div.Div,{flex:1,key:index,__source:{fileName:_jsxFileName,lineNumber:111,columnNumber:11}},child);})),showIndicators&&internal_renderIndicators());};exports.Carousel=Carousel;Carousel.Item=_item.default;
//# sourceMappingURL=carousel.component.js.map